<!DOCTYPE html>
<html lang="de">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>JSON File Visualizer</title>
		<link rel="stylesheet" href="styles.css" />
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
			rel="stylesheet" />
	</head>
	<body>
		<div class="container">
			<header>
				<h1><i class="fas fa-table"></i> JSON File Visualizer</h1>
				<p>Visualisieren Sie JSON-Dateien als interaktive Tabellen</p>
			</header>

			<div class="upload-section">
				<div class="upload-area" id="uploadArea">
					<i class="fas fa-cloud-upload-alt"></i>
					<h3>JSON-Datei hochladen</h3>
					<p>
						Ziehen Sie eine JSON-Datei hierher oder klicken Sie zum Auswählen
					</p>
					<input type="file" id="fileInput" accept=".json" hidden />
					<button
						class="upload-btn"
						onclick="document.getElementById('fileInput').click()">
						<i class="fas fa-folder-open"></i> Datei auswählen
					</button>
				</div>
			</div>

			<!-- Dashboard Section -->
			<div
				class="dashboard-section"
				id="dashboardSection"
				style="display: none">
				<div class="stats-grid">
					<div class="stat-card">
						<div class="stat-content">
							<div class="stat-number" id="totalRecords">0</div>
							<div class="stat-label">Datensätze</div>
						</div>
						<div class="stat-icon">
							<i class="fas fa-database"></i>
						</div>
					</div>

					<div class="stat-card">
						<div class="stat-content">
							<div class="stat-number" id="totalColumns">0</div>
							<div class="stat-label">Spalten</div>
						</div>
						<div class="stat-icon">
							<i class="fas fa-columns"></i>
						</div>
					</div>

					<div class="stat-card">
						<div class="stat-content">
							<div class="stat-number" id="dataTypes">0</div>
							<div class="stat-label">Datentypen</div>
						</div>
						<div class="stat-icon">
							<i class="fas fa-chart-pie"></i>
						</div>
					</div>

					<div class="stat-card">
						<div class="stat-content">
							<div class="stat-number" id="nullValues">0</div>
							<div class="stat-label">Null-Werte</div>
						</div>
						<div class="stat-icon">
							<i class="fas fa-exclamation-circle"></i>
						</div>
					</div>
				</div>
			</div>

			<div class="controls-section" id="controlsSection" style="display: none">
				<div class="controls">
					<div class="search-container">
						<i class="fas fa-search"></i>
						<input
							type="text"
							id="searchInput"
							placeholder="Suchen Sie in allen Spalten..." />
					</div>

					<div class="filter-container">
						<select id="columnFilter">
							<option value="">Alle Spalten</option>
						</select>
						<select id="filterOperator">
							<option value="contains">Enthält</option>
							<option value="equals">Gleich</option>
							<option value="starts">Beginnt mit</option>
							<option value="ends">Endet mit</option>
							<option value="greater">Größer als</option>
							<option value="less">Kleiner als</option>
							<option value="between">Zwischen</option>
							<option value="empty">Ist leer</option>
							<option value="not_empty">Nicht leer</option>
						</select>
						<input
							type="text"
							id="columnSearchInput"
							placeholder="Filterwert..." />
						<input
							type="text"
							id="columnSearchInput2"
							placeholder="Bis-Wert..."
							style="display: none" />
					</div>

					<div class="action-buttons">
						<button id="columnManagerBtn" class="btn btn-info">
							<i class="fas fa-columns"></i> Spalten-Manager
						</button>
						<button id="exportBtn" class="btn btn-secondary">
							<i class="fas fa-download"></i> CSV Export
						</button>
						<button id="clearFiltersBtn" class="btn btn-info">
							<i class="fas fa-filter"></i> Filter zurücksetzen
						</button>
						<button id="clearBtn" class="btn btn-danger">
							<i class="fas fa-trash"></i> Zurücksetzen
						</button>
					</div>
				</div>
			</div>

			<!-- Column Manager Section -->
			<div
				class="column-manager-section"
				id="columnManagerSection"
				style="display: none">
				<div class="column-manager-header">
					<h3><i class="fas fa-columns"></i> Spalten-Manager</h3>
					<div class="column-manager-controls">
						<button id="selectAllColumns" class="btn-small btn-info">
							<i class="fas fa-check-square"></i> Alle auswählen
						</button>
						<button id="deselectAllColumns" class="btn-small btn-secondary">
							<i class="fas fa-square"></i> Alle abwählen
						</button>
						<button id="resetColumnOrder" class="btn-small btn-warning">
							<i class="fas fa-undo"></i> Reihenfolge zurücksetzen
						</button>
						<button id="closeColumnManager" class="btn-small btn-danger">
							<i class="fas fa-times"></i> Schließen
						</button>
					</div>
				</div>
				<div class="column-manager-content">
					<div class="column-manager-info">
						<p>
							<i class="fas fa-info-circle"></i> Ziehen Sie Spalten, um die
							Reihenfolge zu ändern. Verwenden Sie die Checkboxen zum
							Ein-/Ausblenden.
						</p>
					</div>
					<div id="columnList" class="column-list">
						<!-- Dynamisch generierte Spalten-Items -->
					</div>
				</div>
			</div>

			<div class="table-section" id="tableSection" style="display: none">
				<div class="table-info">
					<span id="recordCount"></span>
					<span id="fileName"></span>
				</div>
				<div class="table-container">
					<table id="dataTable">
						<thead id="tableHead"></thead>
						<tbody id="tableBody"></tbody>
					</table>
				</div>
			</div>

			<div class="error-section" id="errorSection" style="display: none">
				<div class="error-message">
					<i class="fas fa-exclamation-triangle"></i>
					<h3>Fehler beim Laden der Datei</h3>
					<p id="errorText"></p>
				</div>
			</div>
		</div>

		<script src="script.js"></script>
	</body>
</html>
